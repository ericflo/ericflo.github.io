<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Restructured Text | Eric Florenzano's Blog]]></title>
  <link href="http://ericflo.github.com/blog/categories/restructured-text/atom.xml" rel="self"/>
  <link href="http://ericflo.github.com/"/>
  <updated>2012-01-01T18:16:12-08:00</updated>
  <id>http://ericflo.github.com/</id>
  <author>
    <name><![CDATA[Eric Florenzano]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Syntax Highlighting]]></title>
    <link href="http://ericflo.github.com/blog/2008/02/21/syntax-highlighting/"/>
    <updated>2008-02-21T17:12:01-08:00</updated>
    <id>http://ericflo.github.com/blog/2008/02/21/syntax-highlighting</id>
    <content type="html"><![CDATA[<p>
Over the past week, I've had several people write me asking how I prefer to do syntax highlighting.  It's funny that this question cropped up now, just as I changed the way that it's handled on this blog.  The way that I used to do it was what I <code>posted to djangosnippets</code>_ almost a year ago: use a regular expression to parse out <code>&lt;code&gt;&lt;/code&gt;</code> blocks, highlight the stuff in-between, and spit it back out.</p>

<p>The problem with that method was that that would require some more sophisticated logic now that I'm using RestructuredText<em> to write all of my posts.  Unwilling to think any harder than necessary, I did a quick <code>google search</code></em>, and the second result was exactly what I was looking for: a RestructuredText directive<em>, ready-made by the Pygments</em> people.</p>

<p>The trick is to put <code>this file</code><em> somewhere on your python path.  Then, in the <code>__init__.py</code> of one of the Django apps that will use syntax highlighting, just import the file.  It's <strong>that simple</strong>!  (I love RestructuredText.)  But it's not only RestructuredText that benefits from this style of plugin.  Markdown</em>, too, has a <code>similar plugin</code>_--again provided by the Pygments people.</p>

<p>.. code-block:: restructuredtext</p>

<pre><code>.. code-block:: python

    print "This is an example of how to use RestructuredText's new directive."
</code></pre>

<p>I hope that this answers some of the questions that people had.  On a similar note, I'm extremely happy to see that people have been finding the <code>Contact Me</code>_ link on the right side of the page.  Please continue to send me any questions and comments that you have for me!</p>

<p>.. <em><code>posted to djangosnippets</code>: http://www.djangosnippets.org/snippets/25/
.. </em>RestructuredText: http://docutils.sourceforge.net/rst.html
.. <em><code>google search</code>: http://www.google.com/search?q=restructured+text+pygments
.. </em>directive: http://docutils.sourceforge.net/docs/ref/rst/directives.html
.. <em>Pygments: http://pygments.org/
.. </em><code>this file</code>: http://dev.pocoo.org/projects/pygments/browser/external/rst-directive.py
.. <em>Markdown: http://daringfireball.net/projects/markdown/
.. </em><code>similar plugin</code>: http://dev.pocoo.org/projects/pygments/browser/external/markdown-processor.py
.. _<code>Contact Me</code>: http://www.eflorenzano.com/contact/
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Django Tip: A Denormalization Alternative]]></title>
    <link href="http://ericflo.github.com/blog/2008/02/15/django-tip-denormalization-alternative/"/>
    <updated>2008-02-15T13:28:06-08:00</updated>
    <id>http://ericflo.github.com/blog/2008/02/15/django-tip-denormalization-alternative</id>
    <content type="html"><![CDATA[<p>
In creating an any website with textual content, you have the choice of either writing plaintext or writing in a markup language of some kind.  The immediately obvious choice for markup language is HTML (or XHTML), but HTML is not as human-readable as something like Textile<em>, Markdown</em>, or <code>Restructured Text</code>_.  The advantage of choosing one of those human-readable alternatives is that content encoded using one of them can be translated very easily into HTML.</p>

<p>When one of my friends_ started designing his blog using Django, it got me thinking about how best to deal with that translated HTML.  It seems like a waste to keep re-translating it every time a visitor views the page, but it also seems like it's redundant to keep the translated HTML stored in the database.</p>

<p>Here's my solution to the problem: <strong>cache it</strong>.  For a month.  Here's an example, using Restructured Text:</p>

<p>.. code-block:: python</p>

<pre><code>from django.db import models
from django.contrib.markup.templatetags.markup import restructuredtext
from django.core.cache import cache
from django.utils.safestring import mark_safe

class MyContent(models.Model):
    content = models.TextField()

    def _get_content_html(self):
        key = 'mycontent_html_%s' % str(self.pk)
        html = cache.get(key)
        if not html:
            html = restructuredtext(self.content)
            cache.set(key, html, 60*60*24*30)
        return mark_safe(html)
    content_html = property(_get_content_html)

    def save(self):
        if self.id:
            cache.delete('mycontent_html_%s' % str(self.pk))
        super(MyContent, self).save()
</code></pre>

<p>What I'm doing here is writing a method which either gets the translated HTML from the cache, or translates it and stores it in the cache for a month.  Then, it returns it as safe HTML to display in a template.  The last thing that we do is override the save method on the model, so that whenever the model is re-saved, the cache is deleted.</p>

<p>There we go!  We now have the HTML-rendered data that we want, and no duplicated data in the database.  Keep in mind that this way of doing things becomes more and more useful the more RAM that your webserver has.</p>

<p>.. <em>Textile: http://www.textism.com/tools/textile/
.. </em>Markdown: http://daringfireball.net/projects/markdown/
.. <em><code>Restructured Text</code>: http://docutils.sourceforge.net/rst.html
.. </em>friends: http://thauber.com/
</p>
]]></content>
  </entry>
  
</feed>
