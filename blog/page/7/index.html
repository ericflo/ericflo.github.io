
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Eric Florenzano's Blog</title>
  <meta name="author" content="Eric Florenzano">

  
  <meta name="description" content="PyCon 2008 has come to an end for me today, and while it was a highly different
event for me this year than last year, it was more enoyable in many &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ericflo.github.com/blog/page/7">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Eric Florenzano's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1959803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Eric Florenzano's Blog</a></h1>
  
    <h2>I am me.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ericflo.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/20/talk-controversy-django-community-sprints-and-peop/">Talk Controversy, Django Community, Sprints, and People</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-20T17:14:33-07:00" pubdate data-updated="true">Mar 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PyCon 2008  has come to an end for me today, and while it was a highly different
event for me this year than last year, it was more enoyable in many ways.
During my flight today, I contemplated the previous week and my thoughts
invariably came back to four main themes:</p>
<div class="section" id="formal-talks-and-the-controversy-surrounding-them">
<h2>Formal Talks and the Controversy Surrounding Them</h2>
<p>I was blissfully unaware of all of the controversy surrounding the conference
this year until well after everyone else seemed to be.  I disagree on many of
the points that were brought up on the Python mailing list, but I can&#8217;t help but
think that a few of the points brought up there hit close to the truth.</p>
<p>Last year was my first PyCon, and every talk that I went to excited me,
intrigued me, inspired me, and made me feel like Python was really something
great.  This year, I seemed to consistently pick the talk right next to the
great talks&#8211;I could tell because of the laughing and cheering from the other
side of the wall.</p>
<p>That&#8217;s not to say that I didn&#8217;t attend any great talks this year.  The PyPy
and IronPython/Silverlight talks were definitely highlights.  Both projects are
really thinking outside the box about traditional ways of doing things and are
succeeding in implementing their crazy ideas that could never work.  It&#8217;s
exactly that kind of conceptual evolutionary change that excites me to try new
things myself, and anything that does that is a good thing.</p>
</div>
<div class="section" id="the-django-community-thrives">
<h2>The Django Community Thrives</h2>
<p>Wow.  The Django community is now huge.  At last year&#8217;s Django BoF, we were able
to sit in a big circle and eat pizza and talk about Django, but this year there
were way too many people for that to have been possible.  The BoF was literally
a mini-conference inside of PyCon this year.</p>
<p>It seems like everywhere I went, I&#8217;d run into somebody that I recognized from
the Django community.  There were even some crazy times where people actually
recognized me! (Sometimes I forget that people actually read this blog.)
Whenever there were Django people to be found, they were always grouped together
and keeping each other company.  I think that this is mostly a great thing, as
long as it never turns into a reality distortion field.</p>
<p>No matter how you look at it, the rate of growth of the Django community, even
when compared to the growth of the Python community, is staggering.  At one
point in Adrian Holovaty&#8217;s &quot;The State of Django&quot; talk, he asked everyone to
raise their hand if they were learning Python specifically through using Django.
A large portion of the people in attendence raised their hands.  How cool is
that!?</p>
</div>
<div class="section" id="sprints">
<h2>Sprints</h2>
<p>Sprints dominated my time this year.  Last year I got to stay for one portion of
one sprint&#8211;simply not enough to really understand what sprinting is all about.
This year, however, I got to sprint a lot!  The first day, I smashed through
about four patches and then started working on many-to-many intermediary model
support.  The merging of newforms-admin is really one big barrier for this patch
right now, so I was basically forced to stop working on it.</p>
<p>Aside from those contributions to Django itself, however, about 5 of us (who, by
the way ranged in previous experience in Django from almost none to branch
committer) began working on a project for the community.  Unfortunately we&#8217;re
not yet finished with the site (we&#8217;re probably sitting at about 75% complete),
so I can&#8217;t publicly reveal it.  Rest assured that I&#8217;ll blog about the site
itself once it&#8217;s ready.</p>
<p>In all actuality, however, we didn&#8217;t put our noses to the grindstone on this
site.  Sure we got a ton of work done on it in an extremely short amount of
time, but we could have gotten more done.  Instead of being code monkeys,
though, we really ended up taking the time to just drink some beer, make fun of
each other, and get to know one another.  And that&#8217;s really what it&#8217;s all about.</p>
</div>
<div class="section" id="it-always-boils-down-to-the-people">
<h2>It Always Boils Down to the People</h2>
<p>This feels like it&#8217;s becoming sort of a recurring theme to my blog, but it&#8217;s
something that I find to be true time and time again.  If PyCon had been just
the talks and coding by oneself, it would not have been very fun&#8211;it really
boils down to this: it&#8217;s the people who make life fun.  People that challenge
you, trust you, people who don&#8217;t match up with your expectations of them,
people who make you laugh, and people who you just can&#8217;t figure out.</p>
<p>There&#8217;s never a better place to find people who fit all of the above criteria
than PyCon, and in this case we all share a common interest: Python.  I found
myself thinking at the end about some of my fellow sprinters that we had become
quite good friends.  I don&#8217;t know why it happened, but in only a week we really
seemed to get along.</p>
<p>Why do I love PyCon?  Because you can get into debates about computational
linguistics, walk 20 blocks with arms full of beer, stay up all night coding,
and groove out to some really amazing live jazz, all in one week.  That&#8217;s why
I love PyCon.</p>
<p>(Note: There are no links in this post since I wrote it on a plane and posted it in-between connecting flights in an airport.)</p>
</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/13/pycon-2008/">PyCon 2008</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-13T18:04:47-07:00" pubdate data-updated="true">Mar 13<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m currently on my way to Chicago for PyCon 2008!  I&#8217;ve miraculously convinced two of my good friends, Tony Hauber and Chris Coudron to come along as well.  They&#8217;re even going to participate in the sprints.</p>
<p>Last year I was still 20 years old and therefore couldn&#8217;t participate in any of the drinking activities, but this year it&#8217;s a different story.  It&#8217;s going to be really fun to see that side of the conference this year.</p>
<p>Come talk to me about&#8230;well..anything, really.  Pretty much any Django-related activity is a good bet on where to find me, otherwise hit up Twitter/Pownce, as I&#8217;ll attempt to use those services to their fullest.  Have a wonderful PyCon and I hope to see and talk to a lot of you there!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/12/ideas-and-execution/">Ideas and Execution</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-12T03:57:30-07:00" pubdate data-updated="true">Mar 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After my <a class="reference external" href="/blog/post/ajax-voting-nicer-css-threadedcomments-test/">last post about django-threadedcomments</a>, there have been several new releases.  We&#8217;ve integrated completely with <a class="reference external" href="http://code.google.com/p/django-comment-utils/">comment_utils</a>, added support for <a class="reference external" href="http://site.gravatar.com/">gravatar</a>, and added some internationalization (I love that we abbreviate this as i18n) support as well.  Every day more and more people seem to be adding bug reports, patches, and feature requests to the ticket tracker.  This couldn&#8217;t make me happier, and I hope to see it continue.  But what does this have to do with ideas?  It&#8217;s the first programming idea that I&#8217;ve taken through conception, execution and all the way to support.  After <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">django-threadedcomments</a>, I&#8217;ve decided to change my outlook on how to organize and deal with ideas that I get every day.</p>
<div class="section" id="supporting-a-project">
<h2>Supporting a Project</h2>
<p>There sure is a thrill to just sitting down and quickly hammering out the solution to a problem.  Who cares if it&#8217;s hacky and incomplete?  You just proved that your idea was doable and you did it.  It instills quite the sense of accomplishment.  That&#8217;s the style of project that I&#8217;ve worked on until now (aside from work).  With <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">django-threadedcomments</a>, however, there&#8217;s a completely different feeling that&#8217;s just as thrilling:  people are actually using it.  It gives a completely different and stronger sense of accomplishment.  The reason is because I made a conscious effort to support the application after its initial release, for my own benefit and for others&#8217;.</p>
<p>Admittedly it can be tedious at first.  I&#8217;m convinced that nobody enjoys writing test code, and writing documentation can take as long as writing the code itself (especially if you delete and re-write as much as I do), but being able to apply patches that people submit and actually <em>ghasp</em> re-use your own code in other projects is where the reward really lies.</p>
</div>
<div class="section" id="ideas">
<h2>Ideas</h2>
<p>I have ideas all the time&#8211;as I think most people do.  Whether it be while writing code for one project, sitting idly in class, or even eating my cereal in the morning, ideas for nifty programs or websites or APIs just sort of pop into my head.  What do I do with them?  Until recently, what happened is that I&#8217;d start working on it and lose interest after a while.  Over the last few months, however, I&#8217;ve begun to form a list instead of starting on the projects.</p>
<p>Why make a list?  Looking at my track record of starting and abandoning projects&#8211;and assuming that I&#8217;d like to do that far less often&#8211;it seems that something needs to change.  The change that I&#8217;ve settled on is to put them on a list instead of hastily implementing them.  When I attack one of these ideas, I&#8217;ll attack it fully and correctly; bringing it from conception to implementation, and finally to support.  The reasons for this are three-fold:</p>
<ol class="arabic simple">
<li>It&#8217;s a good incubation period.  After a while, some ideas seem stupid, while others keep begging to be solved.</li>
<li>It allows for a greater sense of accomplishment.  Once you cross out a few items on your list, you&#8217;ll realize that what you&#8217;ve done is quite a feat.</li>
<li>You can simply remember all those crazy ideas that you have had.</li>
</ol>
</div>
<div class="section" id="what-is-on-my-list">
<h2>What is on my List?</h2>
<p>I&#8217;m sure many of you may be asking what, specifically, I have on my list.  <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">django-threadedcomments</a> is on there, and my next project is <a class="reference external" href="http://code.google.com/p/django-simplestats/">django-simplestats</a>.  The latter is not ready for public consumption yet, but check it out if you&#8217;d like to see a sneak peek.  There are also several other items, but I&#8217;m not going to talk about them because it would take all the fun away from me!  Honestly though, don&#8217;t ask me for my list.  Come up with your own and work through it for yourself.</p>
</div>
<div class="section" id="and-you">
<h2>And You</h2>
<p>Enough about me in this rambling post, what about you&#8211;how do you deal with ideas that you get every day?  Am I crazy for actually enjoying supporting a project?  Do you have any tips for me in my organizational endeavours?  Please respond in the comment section below.</p>
</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/22/hosting-django-site-pure-python/">Hosting a Django Site With Pure Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-22T12:47:48-08:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Developing a site with Django is usually a breeze.  You&#8217;ve set up your models, created some views and used some generic views, and you&#8217;ve even created some spiffy templates.  Now it&#8217;s time to publish that site for everyone to see.  Now if you&#8217;re not already familiar with Apache, Lighttpd, or Nginx, you&#8217;re stuck trying to figure out complicated configuration files and settings directives.  &quot;Why can&#8217;t deployment be just as easy as running the development server?&quot;, you scream.</p>
<p>It&#8217;s tempting to just attempt to use the development server in production.  But then you read the documentation (you do read the documentation, right?) and it clearly says:</p>
<blockquote>
DO NOT USE THIS SERVER IN A PRODUCTION SETTING. It has not gone through security audits or
performance tests. (And that&#8211;  s how it&#8211;  s gonna stay. We&#8211;  re in the business of making Web
frameworks, not Web servers, so improving this server to be able to handle a production
environment is outside the scope of Django.)</blockquote>
<p>Looks like it&#8217;s time to fire up Apache, right?  Wrong.  At least, you don&#8217;t have to.</p>
<div class="section" id="cherrypy-to-the-rescue">
<h2>CherryPy to the Rescue</h2>
<p>One of the features that <a class="reference external" href="http://www.cherrypy.org/">CherryPy</a> touts quite highly is that they include <tt class="docutils literal">&quot;A fast, <span class="pre">HTTP/1.1-compliant,</span> WSGI <span class="pre">thread-pooled</span> webserver&quot;</tt>, however a lesser known fact about that webserver is that it can be run completely independently of the rest of CherryPy&#8211;it&#8217;s a standalone WSGI server.</p>
<p>So let&#8217;s grab a copy of the CherryPy WSGI webserver:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">wget http://svn.cherrypy.org/trunk/cherrypy/wsgiserver/__init__.py -O wsgiserver.py
</span></code></pre></td></tr></table></div></figure><p>Now that you&#8217;ve got a copy of the server, let&#8217;s write a script to start it up.  Your choices may vary depending on how many threads you want to run, etc.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">wsgiserver</span>
</span><span class="line"><span class="c">#This can be from cherrypy import wsgiserver if you&#39;re not running it standalone.</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">os</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">django.core.handlers.wsgi</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class="line">    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;settings&#39;</span>
</span><span class="line">    <span class="n">server</span> <span class="o">=</span> <span class="n">wsgiserver</span><span class="o">.</span><span class="n">CherryPyWSGIServer</span><span class="p">(</span>
</span><span class="line">        <span class="p">(</span><span class="s">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">),</span>
</span><span class="line">        <span class="n">django</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">wsgi</span><span class="o">.</span><span class="n">WSGIHandler</span><span class="p">(),</span>
</span><span class="line">        <span class="n">server_name</span><span class="o">=</span><span class="s">&#39;www.django.example&#39;</span><span class="p">,</span>
</span><span class="line">        <span class="n">numthreads</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
</span><span class="line">    <span class="p">)</span>
</span><span class="line">    <span class="k">try</span><span class="p">:</span>
</span><span class="line">        <span class="n">server</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class="line">    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span><span class="line">        <span class="n">server</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></div>
<div class="section" id="consequences">
<h2>Consequences</h2>
<p>Now you&#8217;ve got the server up and running, lets talk about some consequences of this approach.</p>
<ol class="arabic simple">
<li>This is a multithreaded server.  Django is not guaranteed to be completely thread safe.  Many people seem to be running it fine in multithreaded environments, but thread safety may break at any time without notice.  It might be an interesting project to convert cherrypy.wsgiserver to use <a class="reference external" href="http://pyprocessing.berlios.de/">processing</a> instead of <a class="reference external" href="http://www.python.org/doc/lib/module-threading.html">threading</a> and see how the performance changes.</li>
<li>This server is written in Python, and as with any other Python program, it will be difficult for it to match the speed of pure C.  For exactly this reason, <a class="reference external" href="http://code.google.com/p/modwsgi/">mod_wsgi</a> is probably always going to be faster than this solution.</li>
<li>You can have a completely self-contained server environment that can be run on Mac, Windows, and Linux with only Python and a few Python libraries installed.  Distributing this wsgiserver.py script along with your Django project (or with a Django app, even) could be a great way of keeping the entire program self-contained.</li>
</ol>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>Would I use this instead of a fully-featured web server like Apache or Nginx?  Probably not.  I would, however, use it for an intranet which demands more performance and security than the built-in development server.  In any case, it&#8217;s a nice nugget of information to have in your deployment toolbox.</p>
</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/21/syntax-highlighting/">Syntax Highlighting</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-21T17:12:01-08:00" pubdate data-updated="true">Feb 21<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Over the past week, I&#8217;ve had several people write me asking how I prefer to do syntax highlighting.  It&#8217;s funny that this question cropped up now, just as I changed the way that it&#8217;s handled on this blog.  The way that I used to do it was what I <a class="reference external" href="http://www.djangosnippets.org/snippets/25/">posted to djangosnippets</a> almost a year ago: use a regular expression to parse out <tt class="docutils literal"><span class="pre">&lt;code&gt;&lt;/code&gt;</span></tt> blocks, highlight the stuff in-between, and spit it back out.</p>
<p>The problem with that method was that that would require some more sophisticated logic now that I&#8217;m using <a class="reference external" href="http://docutils.sourceforge.net/rst.html">RestructuredText</a> to write all of my posts.  Unwilling to think any harder than necessary, I did a quick <a class="reference external" href="http://www.google.com/search?q=restructured+text+pygments">google search</a>, and the second result was exactly what I was looking for: a RestructuredText <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/directives.html">directive</a>, ready-made by the <a class="reference external" href="http://pygments.org/">Pygments</a> people.</p>
<p>The trick is to put <a class="reference external" href="http://dev.pocoo.org/projects/pygments/browser/external/rst-directive.py">this file</a> somewhere on your python path.  Then, in the <tt class="docutils literal">__init__.py</tt> of one of the Django apps that will use syntax highlighting, just import the file.  It&#8217;s <strong>that simple</strong>!  (I love RestructuredText.)  But it&#8217;s not only RestructuredText that benefits from this style of plugin.  <a class="reference external" href="http://daringfireball.net/projects/markdown/">Markdown</a>, too, has a <a class="reference external" href="http://dev.pocoo.org/projects/pygments/browser/external/markdown-processor.py">similar plugin</a>&#8211;again provided by the Pygments people.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="restructuredtext"><span class="line"><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> python
</span><span class="line">
</span><span class="line">    print &quot;This is an example of how to use RestructuredText&#39;s new directive.&quot;
</span></code></pre></td></tr></table></div></figure><p>I hope that this answers some of the questions that people had.  On a similar note, I&#8217;m extremely happy to see that people have been finding the <a class="reference external" href="http://www.eflorenzano.com/contact/">Contact Me</a> link on the right side of the page.  Please continue to send me any questions and comments that you have for me!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/15/django-tip-denormalization-alternative/">Django Tip: A Denormalization Alternative</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-15T13:28:06-08:00" pubdate data-updated="true">Feb 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In creating an any website with textual content, you have the choice of either writing plaintext or writing in a markup language of some kind.  The immediately obvious choice for markup language is HTML (or XHTML), but HTML is not as human-readable as something like <a class="reference external" href="http://www.textism.com/tools/textile/">Textile</a>, <a class="reference external" href="http://daringfireball.net/projects/markdown/">Markdown</a>, or <a class="reference external" href="http://docutils.sourceforge.net/rst.html">Restructured Text</a>.  The advantage of choosing one of those human-readable alternatives is that content encoded using one of them can be translated very easily into HTML.</p>
<p>When one of my <a class="reference external" href="http://thauber.com/">friends</a> started designing his blog using Django, it got me thinking about how best to deal with that translated HTML.  It seems like a waste to keep re-translating it every time a visitor views the page, but it also seems like it&#8217;s redundant to keep the translated HTML stored in the database.</p>
<p>Here&#8217;s my solution to the problem: <strong>cache it</strong>.  For a month.  Here&#8217;s an example, using Restructured Text:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">django.contrib.markup.templatetags.markup</span> <span class="kn">import</span> <span class="n">restructuredtext</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">MyContent</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="line">    <span class="n">content</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">_get_content_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="n">key</span> <span class="o">=</span> <span class="s">&#39;mycontent_html_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</span><span class="line">        <span class="n">html</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class="line">        <span class="k">if</span> <span class="ow">not</span> <span class="n">html</span><span class="p">:</span>
</span><span class="line">            <span class="n">html</span> <span class="o">=</span> <span class="n">restructuredtext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span><span class="line">            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span>
</span><span class="line">        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class="line">    <span class="n">content_html</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_content_html</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span class="line">            <span class="n">cache</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">&#39;mycontent_html_</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">))</span>
</span><span class="line">        <span class="nb">super</span><span class="p">(</span><span class="n">MyContent</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure><p>What I&#8217;m doing here is writing a method which either gets the translated HTML from the cache, or translates it and stores it in the cache for a month.  Then, it returns it as safe HTML to display in a template.  The last thing that we do is override the save method on the model, so that whenever the model is re-saved, the cache is deleted.</p>
<p>There we go!  We now have the HTML-rendered data that we want, and no duplicated data in the database.  Keep in mind that this way of doing things becomes more and more useful the more RAM that your webserver has.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/11/context-processors-django/">On Context Processors in Django</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-11T12:20:01-08:00" pubdate data-updated="true">Feb 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This started out as a response in the comments to James Bennett&#8217;s <a class="reference external" href="http://www.b-list.org/weblog/2008/feb/11/integrity/">latest post</a>, but I think that there&#8217;s enough here to warrant its own post.  If you haven&#8217;t yet read it, then I suggest you do&#8211;it&#8217;s a well-put argument for Django&#8217;s application-level modularity and pluggability.</p>
<p>But I do disagree with him on one point.  One of the things that he highlights is about <em>&quot;how easy it is for one Django application to expose functionality to others through things like context processors&quot;.</em>  I don&#8217;t find this to be true.  Currently there are only two ways of adding processors to the list of <tt class="docutils literal">context_processors</tt> for a particular view:</p>
<ol class="arabic simple">
<li>Adding them as an argument to the RequestContext (per-view).</li>
<li>Adding them to the global context processors list in settings.py (global).</li>
</ol>
<p>What these methods lack is a middle ground: per-app specification of context processors.  This is what  James Bennett seemingly alludes to which simply doesn&#8217;t exist. What if I&#8217;d like all of the views in my blog app, and all views in flatpages to get a certain context processor list?  Currently in Django that is not possible.  I do think that there is demand for this, and it&#8217;s something that probably wouldn&#8217;t be too hard to add to trunk.</p>
<p>But really, if I can think of this particular use case of context processor loading, I&#8217;m sure there are other people who could think of others.  For example, what about a different set of processors based on URL, or based on IP address, or something even more strange?  What Django really needs is a pluggable context processor loader similar to how it loads session backends, authentication backends, database backends, urls, etc.  That way, people could provide their own loaders to do any kind of context processing differentiation that they want.</p>
<p>The only thing that this could do is make Django applications more pluggable&#8211;and that&#8217;s always a good thing!  The good news is that PyCon is coming up, and I can try to tackle this during the sprinting days.</p>
<p><strong>UPDATE:</strong>  <a class="reference external" href="http://www.pointy-stick.com/blog/2008/02/12/django-tip-application-level-context-processors/">Malcolm Tredinnick</a> has posted an excellent followup to this post that suggests a simple solution for those who want to do something similar to application-level context processor loading right now.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/08/oop-and-django/">OOP and Django</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-08T23:06:52-08:00" pubdate data-updated="true">Feb 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Being a senior in college means many things.  It means job interviews and upper-level classes, emotional instability and independent living.  It also means countless hours of sitting in uninteresting classes whose sole purpose is to fulfill some graduation requirement.  For me, that means lots of daydreaming&#8211;about anything other than that class.  Recently however, during one daydream, I had a brain wave worth typing up: What&#8217;s the deal with Object-Oriented Programming and Django?</p>
<div class="section" id="the-convention">
<h2>The Convention</h2>
<p>Browsing through the <tt class="docutils literal">views.py</tt> file in just about any publicly-available Django-based application will almost certainly reveal nothing more than a bunch of functions.  These functions are undeniably specialized: they take in an <tt class="docutils literal">HttpRequest</tt> object (plus possibly some more information), and they return an <tt class="docutils literal">HttpResponse</tt> object.  Although these functions may be specialized, nevertheless they are still just functions.</p>
<p>This should come as no surprise to anyone who has used the framework&#8211;in fact, it&#8217;s encouraged by common convention!  Not only does <a class="reference external" href="http://www.djangoproject.com/documentation/tutorial03/">the tutorial</a> use plain functions for views, but also the <a class="reference external" href="http://djangobook.com/en/1.0/chapter08/">Django Book</a>, and <a class="reference external" href="http://code.google.com/p/django-voting/">just</a> <a class="reference external" href="http://code.google.com/p/django-registration/">about</a> <a class="reference external" href="http://code.google.com/p/django-profiles/">every</a> <a class="reference external" href="http://code.google.com/p/django-tagging/">other</a> <a class="reference external" href="http://code.google.com/p/django-openid/">application</a> <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">out</a> <a class="reference external" href="http://code.google.com/p/django-contact-form/">there</a>.  The question now becomes &quot;why&quot;?  Why, in a language that seems to be &quot;objects all the way down&quot;, does a paradigm emerge for this domain (Django views) wherein functions are used almost exclusively in lieu of objects?</p>
</div>
<div class="section" id="that-s-not-entirely-true-sir">
<h2>That&#8217;s not entirely true, sir&#8230;</h2>
<p>Any time a broad statement like &quot;just about any&quot; is used, the exceptions are what become interesting.  The admin application (both newforms-admin and old) is probably the most notable and interesting exception to my earlier broad statement.  It&#8217;s interesting because it&#8217;s Django&#8217;s shining star!  Other applications which use object orientation: databrowse and formtools.  These are some great Django apps which use Object-Orientation in the views.</p>
<p>Looking at those apps which use OOP and those which don&#8217;t reveals an interesting idea: those apps which strive to go above-and-beyond in terms of modularity tend to be those who end up using classes and their methods for views.  Now this same functionality could be accomplished by using plain functions, but they haven&#8217;t&#8211;their functionality was accomplished using classes and methods.</p>
<p>Please keep in mind that what I&#8217;m not trying to do is make a value judgement on Object-Oriented programming vs. functional programming vs. any other <a class="reference external" href="http://en.wikipedia.org/wiki/Programming_paradigm">programming paradigm</a>.  Instead, I&#8217;m providing an observation about the emergence of a common practice, and trying to analyze its implications.</p>
</div>
<div class="section" id="but-wait">
<h2>But wait!</h2>
<p>What really is the difference between writing a plain function as a view and Object-Oriented programming?  It&#8217;s completely reasonable to argue that writing a plain function for a view <strong>is</strong>, in fact, Object-Oriented programming.  All class methods take in self as their first positional argument, and all views take in request as their first positional argument.  Taking in this argument allows access to state which would otherwise be difficult to access.  Changing the order of urlpatterns is equivalent to changing the polymorphic properties of a class and dynamic method lookup.</p>
<p>In essence, one could argue that <strong>using a plain function as a view is strictly equivalent to writing a method on the HttpRequest object</strong>.  Thinking about it in this way, writing a Django application is really nothing more than building up a monolithic <tt class="docutils literal">HttpRequest</tt> object which the user can call different methods on using its API: the URL.  To me, this is a really interesting idea!</p>
</div>
<div class="section" id="off-my-rocker">
<h2>Off My Rocker</h2>
<p>This is the result of extreme classroom boredom&#8211;so maybe posts here will continue down this slightly-more-esoteric road for a while.  But honestly this was an interesting thought-experiment, and I&#8217;d like to get some feedback on what people think as well.   Am I totally off base with this analysis?  Moreover, do you use true Python &quot;classes&quot; as your views?  If so, what benefits does it bring to the table?</p>
</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/05/xfn-markup-enabled/">XFN Markup Enabled</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-05T10:35:01-08:00" pubdate data-updated="true">Feb 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The recently released <a class="reference external" href="http://code.google.com/apis/socialgraph/">Google Social Graph API</a> was a bit of a wake-up call for me on the power and importance of <a class="reference external" href="http://microformats.org/">microformats</a>.  So I&#8217;ve hacked together a quick implementation of <a class="reference external" href="http://gmpg.org/xfn/">XFN</a> for the blogroll, and added a few <tt class="docutils literal">rel=me</tt> links as well.</p>
<p>I&#8217;ll follow this sometime soon with a post about how I implemented the XFN on a Django model.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/30/ajax-voting-nicer-css-threadedcomments-test/">AJAX, Voting, and Some Nicer CSS: Putting Django-threadedcomments to the Test</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-30T10:02:13-08:00" pubdate data-updated="true">Jan 30<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&#8217;s an interesting feeling open-sourcing an application that you&#8217;ve developed for your own purposes.  Will people use it?  Will people find major design flaws?  Is it just a big waste of time?  These were the questions that were going through my mind before open-sourcing <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">django-threadedcomments</a>.  Fortunately, my worries were quelled almost instantly as a people reacted quite positively to the application.  There was one recurring comment, however, that almost everyone who tried the sample implementation said: <strong>those colors are hideous</strong>.</p>
<p>Beyond even that though, it seems that people saw the sample implementation and got the impression that django-threadedcomments = that sample implementation.  To me, that&#8217;s an underestimation of the power of the modular django app.  I think that <a class="reference external" href="http://www.b-list.org/weblog/2007/nov/29/django-blog/">James Bennett</a> hits the nail on the head when he says that:</p>
<blockquote>
&quot;Rather than a single definitive &#8216;Django blog&#8217; application, for example, I think it&#8211;  s much more likely
we&#8211;  ll see a collection of applications which, taken together, provide all the key
functionality&#8230;&quot;</blockquote>
<p>It was this sentiment that pervaded nearly all of the design decisions behind django-threadedcomments: it should be flexible, modular, and reusable so that, taken together with other similarly-designed apps, it can provide some compelling functionality at a fraction of the effort.  Now we most assuredly didn&#8217;t achieve all of those design goals fully, but I believe we&#8217;re headed in at least the right direction with its development.</p>
<p>To prove my point, I decided to create an improved Digg/Reddit comment system clone using <a class="reference external" href="http://insin.webfactional.com/weblog/">Jonathan Buchanan</a>&#8217;s wonderful <a class="reference external" href="http://code.google.com/p/django-voting/">django-voting</a> application, alongside <a class="reference external" href="http://code.google.com/p/django-threadedcomments/">django-threadedcomments</a>, and a fair bit of <a class="reference external" href="http://jquery.com/">jQuery</a>.  Being almost completely new to Javascript, I was pleasantly surprised by how easy it was to not only integrate all of these technologies and use extensive client- and server-side scripting, but also to achieve a compelling commenting system in well under a week of spare time.  Oh, and this time there was actually some effort in making the look and feel of the commenting system acceptable!  As with the first example, this one is completely open sourced and available in the django-threadedcomments SVN repository.</p>
<p>Without further ado, the <a class="reference external" href="http://www.eflorenzano.com/threadexample/blog/">Example Digg/Reddit Comment Clone Plus Focus</a>.</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/02/16/technology-behind-convore/">The Technology Behind Convore</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/10/object-lesson-how-respond-criticism/">An Object Lesson in How to Respond to Criticism</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/09/27/why-node-disappoints-me/">Why node.js disappoints me</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/05/20/we-need-new-word-open/">We need a new word for &#8220;Open&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/02/08/how-do-we-kick-our-synchronous-addiction/">How do we kick our synchronous addiction?</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("ericflo", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/ericflo" class="twitter-follow-button" data-show-count="false">Follow @ericflo</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/109591387819364984777?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Eric Florenzano -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
