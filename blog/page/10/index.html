
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Eric Florenzano's Blog</title>
  <meta name="author" content="Eric Florenzano">

  
  <meta name="description" content="For the past month or so, in my free time I&#8217;ve been working on a potentially very profitable/successful idea. I&#8217;ve had this idea for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://eflorenzano.com/blog/page/10">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Eric Florenzano's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1959803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Eric Florenzano's Blog</a></h1>
  
    <h2>I am me.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:eflorenzano.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/07/26/web-design/">Web Design</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-07-26T00:40:10-07:00" pubdate data-updated="true">Jul 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For the past month or so, in my free time I&#8217;ve been working on a potentially very profitable/successful idea.  I&#8217;ve had this idea for years, and have waited for someone else to do it, but nobody did.  This summer seemed like the perfect time to realize this idea, and to see just how far I could go with it.  There have been challenges in writing the back end for it so far, that much is certain, but by far most of my time has been spent looking for a designer.</p>
<p>I realized almost immediately that my design skills are not adequate to realize my idea in any decent way, so one of the first things that I decided was that I would need to enlist the help of a designer.  I have a budget of no more than $1000, so it should be fairly easy to find a decent if not good designer, right?  Wrong!  I never could have imagined that finding a designer would be so hard!</p>
<p>My first tactic was to email the guy who created inviteshare.com, because I like that design a lot and think he&#8217;s a budding web designer who just needs to be discovered.  He responded, seemingly interested, and as soon as I presented my entire idea he was gone.  I&#8217;m actually fairly suspicious that he&#8217;ll try and implement it himself, effectively stealing it from me.  But judging from his previous <em>development</em> work, I don&#8217;t think I have too much to worry about.</p>
<p>My second tactic was to troll at a community for web designers/developers, like sitepoint.com, and look for potential candidates there.  One can not appreciate just how many AWFUL designers there are out there, until they visit the critique section of sitepoint.  And it&#8217;s the same for all the designer web forums.  For the most part, the good designers don&#8217;t go there while the bad ones go there to get help from the other bad designers.</p>
<p>My third tactic was to scour blogs of the truly great designers, and look at the comments.</p>
<ul class="simple">
<li><a class="reference external" href="http://jeffcroft.com/">Jeff Croft</a></li>
<li><a class="reference external" href="http://subtraction.com/">Khoi Vinh</a></li>
<li><a class="reference external" href="http://shauninman.com/">Shaun Inman</a></li>
<li><a class="reference external" href="http://andyrutledge.com/">Andy Rutledge</a></li>
<li><a class="reference external" href="http://bryanveloso.com/">Bryan Veloso</a></li>
</ul>
<p>&#8230;along with the best agencies:</p>
<ul class="simple">
<li><a class="reference external" href="http://simplebits.com/">simplebits.com</a></li>
<li><a class="reference external" href="http://electricpulp.com/">electricpulp.com</a></li>
<li><a class="reference external" href="http://thebignoob.com/">thebignoob.com</a></li>
</ul>
<p>&#8230;and so on and so forth for about 30 of the best of the best designers and agencies.</p>
<p>I would look at who posted comments and go to their websites, but even those people&#8211;fans of the best&#8211;are way too high-profile for my price range.</p>
<p>Right now, I&#8217;m not really sure whether to get some books and try and teach myself the principles of design, or to try and earn some more money, or to simply keep scouring the net for that budding designer that&#8217;s willing to work for me for a reasonable price.</p>
<p>It&#8217;ll be extremely interesting to see what ends up happening in the coming months.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/15/simple-random-character-function/">Simple Random Character Function</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-04-15T22:27:22-07:00" pubdate data-updated="true">Apr 15<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I use this function all the time, most recently for some anti-spam techniques, and it&#8217;s worth posting somewhere.  It&#8217;s modified from an entry on the activestate cookbook.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">random_chars</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
</span><span class="line">    <span class="kn">import</span> <span class="nn">random</span>
</span><span class="line">    <span class="n">allowed_chars</span> <span class="o">=</span> <span class="s">&quot;abcdefghijklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWZYZ0123456789&quot;</span>
</span><span class="line">    <span class="n">word</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class="line">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
</span><span class="line">        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span> <span class="o">+</span> <span class="n">allowed_chars</span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mh">0xffffff</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">allowed_chars</span><span class="p">)]</span>
</span><span class="line">    <span class="k">return</span> <span class="n">word</span>
</span></code></pre></td></tr></table></div></figure><p>Also, for anyone who knows me and is interested: my surgery went well and I&#8217;m recovering faster than I would have expected.  Hopefully I&#8217;ll be back to 100% speed in the next few days!</p>
<p>Anyways, hopefully this small code snippet is useful to someone else, as well!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/09/notice-anything/">Notice Anything?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-09T00:15:13-08:00" pubdate data-updated="true">Mar 9<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I&#8217;ve yet again redesigned the site.  This was not a backend redesign, but rather an aesthetic redesign consisting of mostly changing the CSS.  The other change that was made was that now I am deploying via subversion checkout.  I do my changes on my local copy, and then I commit those changes to subversion, and finally I do a checkout from the server&#8217;s SVN.  This makes it much easier to deploy in general, and I will see how this ease continues into the future.</p>
<p>I&#8217;d like to work on all of the project ideas that I&#8217;ve got, but it seems like every time I get a free moment, it gets snapped up by something else.  For example, I thought that I would have some time to set up the secret santa site for my family finally, but then I realized that the database backend to this website is going to change a bit in the next few days and if I send everyone links to the secret santa stuff now then they won&#8217;t be able to access it in the near future.  That&#8217;s why I&#8217;ve got to do the database transition to postgresql during spring break and then I can get the secret santa information sent out.</p>
<p>I&#8217;d also like to work on my Django API idea, and I have a rough implementation figured out.  But it&#8217;s not as robust as I&#8217;d like it to be before I release it to the public, and I&#8217;ll actually have to do a little hacking on Django&#8217;s source itself so that I can serialize some meta-information about models themselves, and not just instances of models which are supported right now.</p>
<p>But unfortunately right now I&#8217;ve got to do some learning of Perl, although in a way that kind of excites me.  (Sometimes I just get the itch to try something completely different, and that&#8217;s happening now for sure.)  I&#8217;ll need to invent some kind of pet project to help learn Perl for the future.</p>
<p>Blah, there&#8217;s a bunch more personal stuff to write about, and frustrating professional stuff as well, but nobody that reads this (e.g. nobody) wants to hear about my personal stuff nor be frustrated by the professional stuff.</p>
<p>Despite all there, I&#8217;m excited for what this summer holds in store for me.  No matter what happens, it&#8217;ll be a new and exciting experience and I cannot wait to see what does end up happening.</p>
<p>Until next time!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/02/26/post-pycon-thoughts/">Post-Pycon Thoughts</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-26T01:10:01-08:00" pubdate data-updated="true">Feb 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On the plane ride back from PyCon today, right before getting all excited about a new code idea, I sat there reflecting about PyCon and about all of the things that I remembered.</p>
<p>I remembered feeling like a saturated sponge, soaking up all the knowledge that was possible from all of the amazing people who I met.  I remembered Macs and Ubuntu, and the sea of laptops on which they were operating.  I remember the panels and discussions, where insight into the development process was shared.  And I remembered every night getting back to the hotel room, crashing down into the bed, and being blissfully exhausted.</p>
<p>PyCon brought me to a new place with open source software.  Before going, I knew that I wanted to help, in an abstract sort of way.  But I wasn&#8217;t really motivated until I saw the type of creative thinking that was going on.  It must be that creative thinking is infectious, because new ideas have been popping into my head ever since the convention.  It would be great to take a month or two and just brainstorm and program and implement all of the things that I&#8217;d like to do, without having to worry about where I can slot in that coding time.</p>
<p>Very interesting, as well, was how non-age-discriminating everyone was.  I was expecting to be looked down upon since I&#8217;m only 20, but even in the van on the way to the hotel, I was asked if I was giving a speech.  Next year, maybe!</p>
<p>Things that I&#8217;m excited for in the upcoming weeks and months: databrowse (will be huge in the Django community), hot club of france (vital for the community aspect of Django), Python 3000, Hopefully an array interface built directly into python (thanks NumPy guys!), and finally my own new brainchild: autoapi.  I&#8217;m not fully ready to talk about it, but it is a mechanism triggered similarly to Django&#8217;s admin interface, which provides automatically a publicly accessible api for your app.</p>
<p>Also, the DjangoForge app is in Alpha stage, currently attached to www.flosblog.com.  I don&#8217;t know what will happen from here, however.  Comments on the app ranged from &quot;Hmm&quot; to &quot;Ooh!&quot; but mostly &quot;Hmm&quot;s.  It didn&#8217;t feel great to have people be so unenthusiastic about my work, but that just means that it&#8217;s not good enough.  Also since it&#8217;s a community project, it really should have been a community effort (which the hot club of france will be, hopefully).  In all, it was as good of a learning tool as anything else could be, and possibly something to put on a resume.</p>
<p>So in all: Excellent!  I met so many new people and learned so many great things.  I wish that I could have split up and attended multiple talks and BoFs and lectures all at the same time!  After having only worked with this technology for 6 months, I can&#8217;t imagine anything having a greater impact on my aspirations than what this community has done to them.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/02/22/at-pycon-at-django/">I&#8217;m at PyCon</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-22T13:10:23-08:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m, right now, sitting in the advanced Django tutorial at PyCon.  How cool is that?</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/02/20/pycon-plans/">PyCon Plans</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-20T20:53:35-08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve never been to PyCon before, nor any other conference for that matter, but I&#8217;m leaving tomorrow and so I&#8217;ve come up with a list of talks that I plan on attending.  This is preliminary, obviously, but for now this is my plan:</p>
<p>Tutorial Day (Thursday):</p>
<ul class="simple">
<li>Advanced Django Tutorial in Addison</li>
<li>Attendee Bag Stuffing by Volunteers in Bent Tree I</li>
</ul>
<p>Friday:</p>
<ul class="simple">
<li>Plenary: Chair&#8217;s Opening Remarks - Ballrooms A-E and F-J</li>
<li>Plenary: Keynote 1 - Ivan Krsti? - Ballrooms A-E and F-J</li>
<li>Writing Your Own Python Types in C (#95) - Ballrooms F-J</li>
<li>Writing a Python Extension module in C++ using Swig (#45) - Ballrooms F-J</li>
<li>Using Stackless (#76) - Ballrooms F-J</li>
<li>Lunch &amp; Plenary: Sponsor Lightning Talks (Fri) (Probably Django BoF)- Ballrooms A-E and F-J</li>
<li>Python inside Imageworks (#2) - Ballrooms A-E</li>
<li>pyweek: making games in 7 days (#32) - Ballrooms F-J</li>
<li>Python for Visual Effects and Animation Pipelines: A Case Study of Tippett Studio&#8217;s JET (#86) - Ballrooms A-E</li>
<li>Break w/o Snacks (Room Divider Change)</li>
<li>Plenary: Lightning Talks (Fri PM) - Ballrooms A-E and F-J</li>
<li>Python Lab: Solve This! - Ballrooms F-J</li>
</ul>
<p>Saturday:</p>
<ul class="simple">
<li>Plenary: Keynote 2 - Adele Goldberg - Ballrooms A-E and F-J</li>
<li>SQLAlchemy &#8211; the Front-to-Back database toolkit (#47) - Ballrooms A-E</li>
<li>Understanding and Using NumPy (#52) - Ballrooms F-J</li>
<li>Lunch &amp; Plenary: Keynote 3 - Guido van Rossum - Ballrooms A-E and F-J</li>
<li>Becoming an Open Source Developer: Lessons from the Django Project (#20) - Mesquite</li>
<li>The Absolute Minimum an Open Source Developer Must Know About Intellectual Property (#25) - Mesquite</li>
<li>Dateutil to the Rescue! (#88) - Ballrooms A-E</li>
<li>Break w/ Snacks - All Ballrooms</li>
<li>Interactive Parallel and Distributed Computing with IPython (#50) - Ballrooms A-E</li>
<li>Why and when to use ctypes? (#51) - Ballrooms A-E</li>
<li>Break w/o Snacks (Prep for Lightning + Room Divider Change) - All Ballrooms</li>
<li>Plenary: Lightning Talks (Sat PM) - Ballrooms A-E and F-J</li>
<li>Dinner Break - All Ballrooms</li>
<li>Hands-On with the One-Laptop-per-Child - Mesquite</li>
<li>The Advocacy of Python - Community Discussion - Mesquite</li>
</ul>
<p>So there it is, and I&#8217;m looking forward to seeing all of these interesting talks!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/02/14/poem-crossed-mind/">A Poem Crossed My Mind</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-14T01:29:12-08:00" pubdate data-updated="true">Feb 14<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A glimmer of tomorrow tugs mercilessly on the fabric of tonight.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/02/14/yet-another-project/">Yet Another Project</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-14T00:29:31-08:00" pubdate data-updated="true">Feb 14<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Well a few things have happened over the past few months.  Firstly, I have failed again in keeping this blog up to date.  Hopefully this post will be cathartic and I&#8217;ll enjoy writing it so much that I will begin to post more often.  Secondly, I have been busy with new classes, Algorithms and Programming Languages being the most interesting of the bunch.  Thirdly, I have registered for PyCon!  Fourthly, and this is more recent, I&#8217;ve been working on a Django-related project which, until now, has been secret.</p>
<p>I have been working on a DjangoForge application.  It is not ready for release yet by any means, but it is at the point where I know I&#8217;ll continue working on it until it&#8217;s completed.  Right now, the Model classes are all created, and almost all of the public interface views.  Now all that&#8217;s left is templating and CSS.  It&#8217;s a well-known fact that you should do the hardest things first.</p>
<p>In this case, I should have done the templating and CSS first, since website DESIGN is so hard for me.  However, I have not followed the conventional wisdom, and am now paying for it with my design unskillfulness.  In any case, I am really grinding on this with every spare moment, in the hopes that when PyCon comes around, I&#8217;ll at least have a prototype to show a few people.</p>
<p>Also, if you&#8217;re wondering when Part II of the gallery application is coming: I don&#8217;t know.  I was developing that gallery application for my brother&#8217;s band website, and recently the creation of that website has gone down on his priority list.  That means that it has gone down on my priority list too, especially with PyCon coming up and all of the work on DjangoForge.</p>
<p>If you read this and have any ideas on functionality that DjangoForge should have, or on anything else, just leave a comment and I&#8217;ll get back to it as soon as I can.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/12/19/writing-gallery-app-part-one/">Writing a Gallery App in Django, Part I</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-19T20:28:17-08:00" pubdate data-updated="true">Dec 19<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One thing that I see the need for on almost every site is a place to put images.  Whether it&#8217;s a band website, a personal homepage, or a school newspaper, there will be a need for a photo gallery.  The easy way to do that is to use an open source package available already like Gallery2.  But that&#8217;s written in PHP and it won&#8217;t integrate easily with the rest of your site&#8211;especially if you use Django as the framework for the rest of your site.</p>
<p>The solution: write a gallery application for use in your website.  At first it may seem like a daunting task to create, but as I&#8217;ve found out, it can be quite easy.  My implementation is not completely up and running yet, but that&#8217;s due to design issues with the rest of the site, not the photo gallery app itself.  With no further adieu, let&#8217;s dive in and see how this can work.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">class</span> <span class="nc">Album</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="line">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
</span><span class="line">    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">prepopulate_from</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,))</span>
</span><span class="line">    <span class="n">summary</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</span><span class="line">    <span class="n">date_created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="line">    <span class="n">date_modified</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure><p>As you can see, this is the Album object which contains information about a set of associated photos.  But wait, we don&#8217;t have photos created yet!  Let&#8217;s do that now.</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">class</span> <span class="nc">Photo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="line">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
</span><span class="line">    <span class="n">summary</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="line">    <span class="n">date_created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="line">    <span class="n">date_modified</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="line">    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">&#39;photos/%Y/%m&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">album</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Album</span><span class="p">)</span>
</span><span class="line">    <span class="n">is_cover_photo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure><p>Ok so now we have albums which have photos, and photos have a lot of information like a file which contains an image, a title, and a summary.</p>
<p>Now that we have these objects, we have some choices to make.  The images need to be resized into medium and small images for display on the list and detail pages, respectively.  This can be done several ways:</p>
<ol class="arabic simple">
<li>Use the HTML width and height attributes to resize the images.</li>
<li>Create a Django view with width and height parameters to both resize and serve the images.  (Lazy computation)</li>
<li>Resize the images on upload and store them to disk.  (Upfront computation)</li>
</ol>
<p>The first way is not optimal for two reasons.  Firstly each picture must be downloaded in it&#8217;s entirety.  This is inefficient and could upset people with less bandwidth or bandwidth limits.  Secondly, when most browsers resize images, they do so using poor quality filters, resulting in a low quality representation of an image.</p>
<p>The second way is the most flexible, since the height and the width can be changed in a template or in a view and the resized images will change accordingly.  However, there is more on-the-fly computation with this way, possibly increasing page load times.  Also, Django is not designed to be used to serve binary files directly, so there could be unforseen consequences with handling a large number of photos this way.</p>
<p>The third way is less flexible, but it has one key advantage: it&#8217;s fast.  Since the computation is done on upload, Apache or any other http media server can be used instead, completely removing the need to use the Django framework at all.  Let&#8217;s implement it this way.</p>
<p>First, we&#8217;ll need to overload the save function of the Photo model:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_cover_photo</span><span class="p">:</span>
</span><span class="line">        <span class="n">other_cover_photo</span> <span class="o">=</span> <span class="n">Photo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">album</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">album</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_cover_photo</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</span><span class="line">        <span class="k">for</span> <span class="n">photo</span> <span class="ow">in</span> <span class="n">other_cover_photo</span><span class="p">:</span>
</span><span class="line">            <span class="n">photo</span><span class="o">.</span><span class="n">is_cover_photo</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class="line">            <span class="n">photo</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="line">    <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image_filename</span><span class="p">()</span>
</span><span class="line">    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
</span><span class="line">        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class="line">        <span class="n">img</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="mi">512</span><span class="p">,</span><span class="mi">512</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
</span><span class="line">        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_filename</span><span class="p">())</span>
</span><span class="line">        <span class="n">img</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
</span><span class="line">        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_small_filename</span><span class="p">())</span>
</span><span class="line">    <span class="nb">super</span><span class="p">(</span><span class="n">Photo</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure><p>Before I talk about the thumbnailing aspect of this function, I&#8217;d like to briefly explain what&#8217;s going on with the cover_photo aspect of Photo objects.  Each Album has a cover photo, so if the Album needs to be represented, it can be represented by one special photo.  This is just part of the way that I have designed my object, and can easily be removed.  However, there is a small bit of obligatory boilerplate code in this save function which sets any other is_cover_photo attributes to False if necessary.  (There can only be one cover photo per album, after all).  I&#8217;ll come back to dealing with cover photos later.</p>
<p>First off, the <tt class="docutils literal">if not filename == &#8221;</tt> statement is needed because save is sometimes called with no image data, and that can and will throw exceptions if PIL is used on a None object.  Then, it resizes a medium-sized (512px by 512px) image and saves it to a location provided by get_medium_filename.  I leave it to you to define your own get_medium_filename and get_small_filename with your own naming convention.  I followed Flickr&#8217;s example of an underscore followed by an argument (image001.jpg becomes image001_m.jpg for medium and image001_s.jpg for small).  Finally, this method must call the it&#8217;s parent save method so that all of the other attributes are saved correctly.</p>
<p>Now that we&#8217;ve overloaded the save functionality, we are going to have a problem with deletion.  Django will automatically delete the original image, but the resized thumbnails will be left on the disk forever.  This is not a huge problem, but we don&#8217;t want that to happen anyways.  So let&#8217;s take care of that by also overloading the delete function of Photo&#8217;s model:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">    <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image_filename</span><span class="p">()</span>
</span><span class="line">    <span class="k">try</span><span class="p">:</span>
</span><span class="line">        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_filename</span><span class="p">())</span>
</span><span class="line">        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_small_filename</span><span class="p">())</span>
</span><span class="line">    <span class="k">except</span><span class="p">:</span>
</span><span class="line">        <span class="k">pass</span>
</span><span class="line">    <span class="nb">super</span><span class="p">(</span><span class="n">Photo</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure><p>Simply put, it deletes the thumbnail files and then calls it&#8217;s parent&#8217;s delete, which will in turn delete it&#8217;s original file.</p>
<p>Aside from creating some optional helper functions like <tt class="docutils literal">get_small_image_url</tt> and/or <tt class="docutils literal">get_medium_image_url</tt>, there&#8217;s not much more to be done with the Photo model.  What can be done still, however, is in Album.  We now have zero or one cover photos for each Album, but it&#8217;s going to be tricky to query for this each time, so let&#8217;s create a function in Album to help us retrieve the associated cover_photo Photo object:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">def</span> <span class="nf">get_cover_photo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_cover_photo</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="line">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_cover_photo</span><span class="o">=</span><span class="bp">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span class="line">    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="line">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">photo_set</span><span class="o">.</span><span class="n">all</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span class="line">    <span class="k">else</span><span class="p">:</span>
</span><span class="line">        <span class="k">return</span> <span class="bp">None</span>
</span></code></pre></td></tr></table></div></figure><p>That is, if the Album has a photo with <tt class="docutils literal">is_cover_photo == True</tt>, then grab it, otherwise grab the first image.  If there are no images in the album, return None.  That&#8217;s it for the models.  Easy, huh?  Just run <tt class="docutils literal">manage.py syncdb</tt>, and let Django do the heavy lifting for you.</p>
<p>That&#8217;s all for part one of this series on writing a gallery application with Django.  Next up: writing the views, urlconfs, and putting it all together.  Templating will be left up to you, since there are so many ways to display this information, but some examples will be given to point you in the right direction.</p>
<p>Note to purists:  I know that some of the functionality that is being implemented as helper functions in the models would be better implemented as custom template tags, but I find it easier to take a less philosophical stance on the &quot;right&quot; way to do things and sometimes do what&#8217;s more practical.  In this case, writing model functions is a much easier solution than creating completely new template tags.  In either case, moving to a new site will require a rewrite, so I&#8217;m not even convinced that it hurts reusability.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/12/09/free-icons/">Free Icons!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-09T01:25:04-08:00" pubdate data-updated="true">Dec 9<span>th</span>, 2006</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you have noticed, there are now icons next to each comments link.  These are provided, free of cost, by <a class="reference external" href="http://www.famfamfam.com">famfamfam.com</a>.  If some 16x16 icons are needed, and you are not graphically or creatively inclined, this is your one-stop-shop.</p>
<p>In other news, a Speed graph has been added to the running page as well as a distance graph.  In doing that, I ran into a problem which was hard to debug, since it only happens on the live site.  In Django, trying to serialize a Numeric data type with simplejson will not work, so make sure to cast it to a python-native data type first.</p>
<p>Problem code:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line"><span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
</span><span class="line">    <span class="n">distance</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">distance</span><span class="p">()</span>
</span><span class="line">    <span class="n">speed_data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">distance</span><span class="o">/</span><span class="n">run</span><span class="o">.</span><span class="n">time</span><span class="p">))</span>
</span><span class="line">    <span class="n">distance_data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">distance</span><span class="p">))</span>
</span><span class="line">    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure><p>Solution:</p>
<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line"><span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
</span><span class="line">    <span class="n">distance</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">distance</span><span class="p">()</span>
</span><span class="line">    <span class="n">speed_data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">distance</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">time</span><span class="p">)))</span>
</span><span class="line">    <span class="n">distance_data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">distance</span><span class="p">))</span>
</span><span class="line">    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure><p>I also noticed a problem with my Pygments function, due to the regular expression, where it only allowed me to post one code snippet.  As you can see in this post, that has been fixed (although it was another particularly nasty bug to track down, and required a complete refactoring of my code in the end).</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/04/18/using-twitter-ios5-integration-single-sign-on/">Using Twitter&#8217;s iOS5 Integration for Single Sign-On</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/01/reducing-code-nesting/">Reducing Code Nesting</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/02/16/technology-behind-convore/">The Technology Behind Convore</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/10/object-lesson-how-respond-criticism/">An Object Lesson in How to Respond to Criticism</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/09/27/why-node-disappoints-me/">Why node.js disappoints me</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("ericflo", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/ericflo" class="twitter-follow-button" data-show-count="false">Follow @ericflo</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/109591387819364984777?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Eric Florenzano -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
